<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>YieldSwarm - DeFi Yield Optimization Platform</title>
    <link rel="stylesheet" href="styles/yieldswarm.css">
    <link rel="stylesheet" href="styles/yieldswarm-enhanced.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="container">
            <div class="header-content">
                <div class="logo">
                    <i class="fas fa-chart-line"></i>
                    <span>YieldSwarm</span>
                </div>
                <nav class="nav">
                    <a href="#dashboard" class="nav-link active">Dashboard</a>
                    <a href="#portfolio" class="nav-link">Portfolio</a>
                    <a href="#strategies" class="nav-link">Strategies</a>
                    <a href="#analytics" class="nav-link">Analytics</a>
                </nav>
                <div class="header-actions">
                    <div class="connection-status" id="connectionStatus">
                        <i class="fas fa-circle"></i>
                        <span>Connecting...</span>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="main">
        <div class="container">
            
            <!-- Dashboard Overview -->
            <section id="dashboard" class="section active">
                <div class="section-header">
                    <h1>YieldSwarm Dashboard</h1>
                    <p>Advanced DeFi yield optimization with AI-powered swarm intelligence</p>
                    <div class="header-actions">
                        <button class="btn btn-success" id="autoStartAgentsBtn">
                            <i class="fas fa-rocket"></i> Auto-Start All Agents
                        </button>
                        <button class="btn btn-info" id="refreshAllDataBtn">
                            <i class="fas fa-sync-alt spinning"></i> Refresh Live Data
                        </button>
                        <div class="data-freshness" id="dataFreshness">
                            <i class="fas fa-clock"></i> Data updated: Never
                        </div>
                    </div>
                </div>

                <!-- Quick Stats -->
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-wallet"></i>
                        </div>
                        <div class="stat-content">
                            <div class="stat-label">Total Portfolio Value</div>
                            <div class="stat-value" id="totalPortfolioValue">$0.00</div>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-chart-line"></i>
                        </div>
                        <div class="stat-content">
                            <div class="stat-label">Current APY</div>
                            <div class="stat-value" id="currentAPY">0.00%</div>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-shield-alt"></i>
                        </div>
                        <div class="stat-content">
                            <div class="stat-label">Risk Score</div>
                            <div class="stat-value" id="riskScore">0/10</div>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-network-wired"></i>
                        </div>
                        <div class="stat-content">
                            <div class="stat-label">Active Chains</div>
                            <div class="stat-value" id="activeChains">0</div>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-database"></i>
                        </div>
                        <div class="stat-content">
                            <div class="stat-label">Live Pools Available</div>
                            <div class="stat-value" id="livePools">0</div>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-coins"></i>
                        </div>
                        <div class="stat-content">
                            <div class="stat-label">Best APY Found</div>
                            <div class="stat-value" id="bestAPY">0.00%</div>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-robot"></i>
                        </div>
                        <div class="stat-content">
                            <div class="stat-label">Active Agents</div>
                            <div class="stat-value" id="activeAgents">0</div>
                        </div>
                    </div>
                </div>

                <!-- Live Market Data Section -->
                <div class="live-data-section">
                    <h2>
                        <i class="fas fa-chart-line"></i> Live Market Data
                        <span class="data-source-badge">DeFiLlama + CoinGecko</span>
                    </h2>
                    
                    <!-- Price Ticker -->
                    <div class="price-ticker">
                        <div class="ticker-item" id="btcPrice">
                            <span class="ticker-symbol">BTC</span>
                            <span class="ticker-price">$0</span>
                            <span class="ticker-change">0%</span>
                        </div>
                        <div class="ticker-item" id="ethPrice">
                            <span class="ticker-symbol">ETH</span>
                            <span class="ticker-price">$0</span>
                            <span class="ticker-change">0%</span>
                        </div>
                        <div class="ticker-item" id="solPrice">
                            <span class="ticker-symbol">SOL</span>
                            <span class="ticker-price">$0</span>
                            <span class="ticker-change">0%</span>
                        </div>
                    </div>

                    <!-- Top Yield Opportunities -->
                    <div class="yield-opportunities">
                        <h3>ðŸ”¥ Top Yield Opportunities (Live Data)</h3>
                        <div class="opportunities-grid" id="yieldOpportunitiesGrid">
                            <div class="opportunity-card loading">
                                <div class="loading-spinner"></div>
                                <p>Loading live yield data...</p>
                            </div>
                        </div>
                        <div class="opportunities-actions">
                            <button class="btn btn-primary" id="loadMoreOpportunities">
                                <i class="fas fa-plus"></i> Load More Opportunities
                            </button>
                            <button class="btn btn-secondary" id="filterOpportunities">
                                <i class="fas fa-filter"></i> Filter by Chain
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Agents Management Section -->
                <div class="agents-management-section">
                    <h2>
                        <i class="fas fa-robot"></i> Agents Management
                        <span class="auto-manage-badge">Auto-Managed</span>
                    </h2>
                    
                    <div class="agents-grid" id="agentsGrid">
                        <div class="agent-card loading">
                            <div class="loading-spinner"></div>
                            <p>Loading agents...</p>
                        </div>
                    </div>
                    
                    <div class="agents-actions">
                        <button class="btn btn-primary" id="createNewAgentBtn">
                            <i class="fas fa-plus"></i> Create New Agent
                        </button>
                        <button class="btn btn-success" id="startAllAgentsBtn">
                            <i class="fas fa-play"></i> Start All Agents
                        </button>
                        <button class="btn btn-warning" id="restartFailedAgentsBtn">
                            <i class="fas fa-redo"></i> Restart Failed Agents
                        </button>
                    </div>
                </div>

                <!-- Quick Analysis with Live Data -->
                <div class="quick-analysis-section">
                    <h2>
                        <i class="fas fa-brain"></i> AI-Powered Analysis
                        <span class="live-badge">Live Data</span>
                    </h2>
                    <div class="analysis-form">
                        <div class="form-row">
                            <div class="form-group">
                                <label for="portfolioValue">Portfolio Value (USD)</label>
                                <input type="number" id="portfolioValue" placeholder="50000" min="1000" max="1000000" value="25000">
                            </div>
                            <div class="form-group">
                                <label for="riskTolerance">Risk Tolerance</label>
                                <select id="riskTolerance">
                                    <option value="low">Low Risk (Conservative)</option>
                                    <option value="medium" selected>Medium Risk (Balanced)</option>
                                    <option value="high">High Risk (Aggressive)</option>
                                </select>
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="targetChains">Target Chains</label>
                                <div class="checkbox-group">
                                    <label><input type="checkbox" value="ethereum" checked> Ethereum</label>
                                    <label><input type="checkbox" value="solana" checked> Solana</label>
                                    <label><input type="checkbox" value="polygon"> Polygon</label>
                                    <label><input type="checkbox" value="avalanche"> Avalanche</label>
                                </div>
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group full-width">
                                <label for="analysisQuery">Analysis Query</label>
                                <textarea id="analysisQuery" placeholder="Describe your yield optimization goals...">Analyze current DeFi yield opportunities with real-time data. Show me the top 5 yield opportunities with current APY rates, TVL data, and risk assessments. Include live token prices in your analysis.</textarea>
                            </div>
                        </div>
                        <div class="form-actions">
                            <button class="btn btn-primary btn-large" id="runAnalysisBtn">
                                <i class="fas fa-robot"></i> Run Live Analysis
                            </button>
                            <button class="btn btn-secondary" id="clearFormBtn">
                                <i class="fas fa-refresh"></i> Clear
                            </button>
                            <button class="btn btn-info" id="viewResultsBtn" disabled>
                                <i class="fas fa-eye"></i> View Results
                            </button>
                        </div>
                    </div>
                    
                    <!-- Analysis Results -->
                    <div class="analysis-results" id="analysisResults" style="display: none;">
                        <h3>Analysis Results</h3>
                        <div class="results-content" id="resultsContent">
                            <!-- Results will be populated here -->
                        </div>
                    </div>
                </div>
                    <div class="analysis-form">
                        <div class="form-row">
                            <div class="form-group">
                                <label for="portfolioValue">Portfolio Value (USD)</label>
                                <input type="number" id="portfolioValue" placeholder="50000" min="1000" max="1000000">
                            </div>
                            <div class="form-group">
                                <label for="riskTolerance">Risk Tolerance</label>
                                <select id="riskTolerance">
                                    <option value="low">Low Risk</option>
                                    <option value="medium" selected>Medium Risk</option>
                                    <option value="high">High Risk</option>
                                </select>
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="targetChains">Target Chains</label>
                                <div class="checkbox-group">
                                    <label><input type="checkbox" value="ethereum" checked> Ethereum</label>
                                    <label><input type="checkbox" value="solana"> Solana</label>
                                    <label><input type="checkbox" value="polygon"> Polygon</label>
                                    <label><input type="checkbox" value="avalanche"> Avalanche</label>
                                </div>
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group full-width">
                                <label for="analysisQuery">Analysis Query</label>
                                <textarea id="analysisQuery" placeholder="Describe your yield optimization goals...">Find the best yield farming opportunities for my portfolio with medium risk tolerance. Focus on stable protocols with good liquidity.</textarea>
                            </div>
                        </div>
                        <div class="form-actions">
                            <button class="btn btn-primary btn-large" id="runAnalysisBtn">
                                <i class="fas fa-search"></i> Run Analysis
                            </button>
                            <button class="btn btn-secondary" id="clearFormBtn">
                                <i class="fas fa-refresh"></i> Clear
                            </button>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Portfolio Section -->
            <section id="portfolio" class="section">
                <div class="section-header">
                    <h1>Portfolio Management</h1>
                    <p>Configure and manage your DeFi portfolio assets</p>
                </div>

                <!-- Asset Configuration -->
                <div class="portfolio-config">
                    <h2>Asset Configuration</h2>
                    <div class="asset-form">
                        <div class="form-row">
                            <div class="form-group">
                                <label for="assetSymbol">Asset Symbol</label>
                                <input type="text" id="assetSymbol" placeholder="ETH">
                            </div>
                            <div class="form-group">
                                <label for="assetAmount">Amount</label>
                                <input type="number" id="assetAmount" placeholder="10.5" step="0.01">
                            </div>
                            <div class="form-group">
                                <label for="assetValue">Value (USD)</label>
                                <input type="number" id="assetValue" placeholder="25000" step="0.01">
                            </div>
                            <div class="form-group">
                                <button class="btn btn-primary" id="addAssetBtn">
                                    <i class="fas fa-plus"></i> Add Asset
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Asset List -->
                    <div class="asset-list">
                        <h3>Current Assets</h3>
                        <div class="asset-table">
                            <table>
                                <thead>
                                    <tr>
                                        <th>Symbol</th>
                                        <th>Amount</th>
                                        <th>Value (USD)</th>
                                        <th>Percentage</th>
                                        <th>Actions</th>
                                    </tr>
                                </thead>
                                <tbody id="assetTableBody">
                                    <tr class="empty-state">
                                        <td colspan="5">No assets configured. Add assets to get started.</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Strategies Section -->
            <section id="strategies" class="section">
                <div class="section-header">
                    <h1>Strategy Execution</h1>
                    <p>Execute yield optimization strategies with real transaction capabilities</p>
                </div>

                <!-- Strategy Templates -->
                <div class="strategy-templates">
                    <h2>Strategy Templates</h2>
                    <div class="template-grid">
                        <div class="template-card" data-strategy="conservative">
                            <div class="template-header">
                                <i class="fas fa-shield-alt"></i>
                                <h3>Conservative Yield</h3>
                            </div>
                            <div class="template-content">
                                <p>Focus on stable protocols with low risk and steady returns</p>
                                <div class="template-metrics">
                                    <span class="metric">Expected APY: 5-8%</span>
                                    <span class="metric">Risk Level: Low</span>
                                </div>
                            </div>
                            <button class="btn btn-primary template-btn">Use Template</button>
                        </div>

                        <div class="template-card" data-strategy="balanced">
                            <div class="template-header">
                                <i class="fas fa-balance-scale"></i>
                                <h3>Balanced Growth</h3>
                            </div>
                            <div class="template-content">
                                <p>Mix of stable and growth protocols for optimal risk-return balance</p>
                                <div class="template-metrics">
                                    <span class="metric">Expected APY: 8-15%</span>
                                    <span class="metric">Risk Level: Medium</span>
                                </div>
                            </div>
                            <button class="btn btn-primary template-btn">Use Template</button>
                        </div>

                        <div class="template-card" data-strategy="aggressive">
                            <div class="template-header">
                                <i class="fas fa-rocket"></i>
                                <h3>High Yield</h3>
                            </div>
                            <div class="template-content">
                                <p>Maximum yield opportunities with higher risk tolerance</p>
                                <div class="template-metrics">
                                    <span class="metric">Expected APY: 15-30%</span>
                                    <span class="metric">Risk Level: High</span>
                                </div>
                            </div>
                            <button class="btn btn-primary template-btn">Use Template</button>
                        </div>
                    </div>
                </div>

                <!-- Strategy Execution -->
                <div class="strategy-execution">
                    <h2>Strategy Execution</h2>
                    <div class="execution-form">
                        <div class="form-row">
                            <div class="form-group">
                                <label for="executionMode">Execution Mode</label>
                                <select id="executionMode">
                                    <option value="analyze">Analyze Only</option>
                                    <option value="simulate">Simulate Execution</option>
                                    <option value="execute">Execute Transactions</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="maxSlippage">Max Slippage (%)</label>
                                <input type="number" id="maxSlippage" value="0.5" step="0.1" min="0.1" max="5.0">
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group full-width">
                                <label for="strategyQuery">Strategy Instructions</label>
                                <textarea id="strategyQuery" placeholder="Describe your strategy execution requirements...">Execute a balanced yield farming strategy across Ethereum and Polygon. Prioritize protocols with TVL > $100M and implement gradual position building over 24 hours.</textarea>
                            </div>
                        </div>
                        <div class="execution-controls">
                            <button class="btn btn-success btn-large" id="executeStrategyBtn">
                                <i class="fas fa-play"></i> Execute Strategy
                            </button>
                            <button class="btn btn-warning" id="simulateStrategyBtn">
                                <i class="fas fa-flask"></i> Simulate First
                            </button>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Analytics Section -->
            <section id="analytics" class="section">
                <div class="section-header">
                    <h1>Analytics & Monitoring</h1>
                    <p>Real-time portfolio analytics and performance tracking</p>
                </div>

                <!-- Performance Metrics -->
                <div class="performance-metrics">
                    <h2>Performance Overview</h2>
                    <div class="metrics-grid">
                        <div class="metric-card">
                            <h3>Total Return</h3>
                            <div class="metric-value positive" id="totalReturn">+$0.00</div>
                            <div class="metric-change" id="totalReturnChange">0.00%</div>
                        </div>
                        <div class="metric-card">
                            <h3>APY (7-day avg)</h3>
                            <div class="metric-value" id="avgAPY">0.00%</div>
                            <div class="metric-change" id="apyChange">0.00%</div>
                        </div>
                        <div class="metric-card">
                            <h3>Impermanent Loss</h3>
                            <div class="metric-value negative" id="impermanentLoss">-$0.00</div>
                            <div class="metric-change" id="ilChange">0.00%</div>
                        </div>
                        <div class="metric-card">
                            <h3>Gas Costs</h3>
                            <div class="metric-value" id="gasCosts">$0.00</div>
                            <div class="metric-change" id="gasChange">0.00%</div>
                        </div>
                    </div>
                </div>

                <!-- Risk Analysis -->
                <div class="risk-analysis">
                    <h2>Risk Analysis</h2>
                    <div class="risk-metrics">
                        <div class="risk-item">
                            <div class="risk-label">Overall Risk Score</div>
                            <div class="risk-bar">
                                <div class="risk-fill" id="overallRiskFill" style="width: 0%"></div>
                            </div>
                            <div class="risk-value" id="overallRiskValue">0/10</div>
                        </div>
                        <div class="risk-item">
                            <div class="risk-label">Smart Contract Risk</div>
                            <div class="risk-bar">
                                <div class="risk-fill" id="contractRiskFill" style="width: 0%"></div>
                            </div>
                            <div class="risk-value" id="contractRiskValue">0/10</div>
                        </div>
                        <div class="risk-item">
                            <div class="risk-label">Liquidity Risk</div>
                            <div class="risk-bar">
                                <div class="risk-fill" id="liquidityRiskFill" style="width: 0%"></div>
                            </div>
                            <div class="risk-value" id="liquidityRiskValue">0/10</div>
                        </div>
                        <div class="risk-item">
                            <div class="risk-label">Market Risk</div>
                            <div class="risk-bar">
                                <div class="risk-fill" id="marketRiskFill" style="width: 0%"></div>
                            </div>
                            <div class="risk-value" id="marketRiskValue">0/10</div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Analytics Section -->
            <section id="analytics" class="section">
                <div class="section-header">
                    <h1>Live Analytics</h1>
                    <p>Real-time market data and yield farming analytics</p>
                </div>

                <!-- Market Overview -->
                <div class="market-overview">
                    <h2>Market Overview</h2>
                    <div class="market-stats-grid">
                        <div class="market-stat-card">
                            <h3>Total Market Cap</h3>
                            <div class="market-value" id="totalMarketCap">$0</div>
                            <div class="market-change" id="marketCapChange">0%</div>
                        </div>
                        <div class="market-stat-card">
                            <h3>DeFi TVL</h3>
                            <div class="market-value" id="defiTVL">$0</div>
                            <div class="market-change" id="tvlChange">0%</div>
                        </div>
                        <div class="market-stat-card">
                            <h3>Active Protocols</h3>
                            <div class="market-value" id="activeProtocols">0</div>
                            <div class="market-change" id="protocolsChange">0</div>
                        </div>
                    </div>
                </div>

                <!-- Live Yield Analysis -->
                <div class="yield-analysis">
                    <h2>Live Yield Analysis</h2>
                    <div class="yield-charts">
                        <div class="chart-container">
                            <h3>Top Protocols by TVL</h3>
                            <div class="protocol-chart" id="protocolChart">
                                <div class="loading-spinner"></div>
                                <p>Loading protocol data...</p>
                            </div>
                        </div>
                        <div class="chart-container">
                            <h3>Yield Distribution by Chain</h3>
                            <div class="chain-chart" id="chainChart">
                                <div class="loading-spinner"></div>
                                <p>Loading chain data...</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Real-Time Risk Metrics -->
                <div class="risk-metrics">
                    <h2>Real-Time Risk Metrics</h2>
                    <div class="risk-dashboard">
                        <div class="risk-item">
                            <div class="risk-label">Protocol Risk</div>
                            <div class="risk-bar">
                                <div class="risk-fill" id="protocolRiskFill" style="width: 0%"></div>
                            </div>
                            <div class="risk-value" id="protocolRiskValue">0/10</div>
                        </div>
                        <div class="risk-item">
                            <div class="risk-label">Smart Contract Risk</div>
                            <div class="risk-bar">
                                <div class="risk-fill" id="contractRiskFill" style="width: 0%"></div>
                            </div>
                            <div class="risk-value" id="contractRiskValue">0/10</div>
                        </div>
                        <div class="risk-item">
                            <div class="risk-label">Liquidity Risk</div>
                            <div class="risk-bar">
                                <div class="risk-fill" id="liquidityRiskFill" style="width: 0%"></div>
                            </div>
                            <div class="risk-value" id="liquidityRiskValue">0/10</div>
                        </div>
                        <div class="risk-item">
                            <div class="risk-label">Market Risk</div>
                            <div class="risk-bar">
                                <div class="risk-fill" id="marketRiskFill" style="width: 0%"></div>
                            </div>
                            <div class="risk-value" id="marketRiskValue">0/10</div>
                        </div>
                    </div>
                </div>
            </section>

        </div>
    </main>

    <!-- Results Modal -->
    <div class="modal" id="resultsModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="modalTitle">Analysis Results</h2>
                <button class="modal-close" id="modalCloseBtn">&times;</button>
            </div>
            <div class="modal-body">
                <div class="results-content" id="resultsContent">
                    <div class="loading-spinner" id="loadingSpinner">
                        <i class="fas fa-spinner fa-spin"></i>
                        <span>Processing your request...</span>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" id="modalCloseFooterBtn">Close</button>
                <button class="btn btn-primary" id="saveResultsBtn">Save Results</button>
            </div>
        </div>
    </div>

    <!-- Notification System -->
    <div class="notification-container" id="notificationContainer"></div>

    <!-- Scripts -->
    <script src="scripts/yieldswarm-enhanced-api.js"></script>
    <script src="scripts/yieldswarm-enhanced-dashboard.js"></script>
    <script src="scripts/yieldswarm-api.js"></script>
    <script src="scripts/yieldswarm-ui.js"></script>
    <script src="scripts/yieldswarm-main.js"></script>
</body>
</html>
